<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gabriel Sosa ‚Äî CV</title>
  <style>
    /* ---- Reset / base ---- */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { height: 100%; background:#f5f7fb; color:#111827; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; line-height: 1.45; }
    h1,h2,h3{ margin:0 0 .2rem 0; line-height:1.2 }
    p{ margin:.25rem 0 }
    ul{ margin:.35rem 0 .75rem 1rem }
    li{ margin:.2rem 0 }

    /* ---- Layout sized to A4 ---- */
    :root{
      --sheet-width: 210mm; /* A4 */
      --sheet-height: 297mm;
      --sheet-margin: 14mm; /* visual margin inside sheet */
      --accent: #0ea5e9; /* sky-500 */
      --muted: #475569; /* slate-600 */
    }

    .toolbar {
      position: sticky; top: 0; z-index: 50; background: #ffffffcc; backdrop-filter: blur(6px);
      display:flex; gap:.5rem; align-items:center; justify-content:center; padding:.6rem .8rem; border-bottom:1px solid #e5e7eb;
    }
    .toolbar button{
      appearance:none; border:1px solid #cbd5e1; background:white; border-radius:999px; padding:.55rem 1rem; font-weight:600; cursor:pointer;
      box-shadow: 0 1px 2px rgba(0,0,0,.05);
    }
    .toolbar button:hover{ border-color:#94a3b8 }

    .sheet {
      width: var(--sheet-width);
      min-height: auto; /* Permitir crecimiento natural */
      margin: 1.2rem auto; background:white; box-shadow: 0 10px 30px rgba(2,6,23,.08);
      position: relative; overflow: hidden; border-radius: 10px;
      padding: var(--sheet-margin);
    }

    /* Header */
    .header{ display:grid; grid-template-columns: 1fr 1fr; gap:10mm; align-items:center; border-bottom:2px solid #e5e7eb; padding-bottom:6mm; }
    .name{ font-size: 26px; font-weight: 800; letter-spacing: .2px; }
    .subtitle{ color:var(--muted); font-weight:600 }
    .contacts{ justify-self:end; text-align:right; font-size: 12.3px; color:#0f172a }
    .contacts a{ color:inherit; text-decoration:none; border-bottom: 1px dotted #94a3b8 }

    .summary{ margin-top: 5mm; font-size: 13.6px; color:#0f172a }

    /* Sections */
    .section{ margin-top: 9mm }
    .section-title{ font-size: 14.8px; text-transform: uppercase; letter-spacing: .12em; color:#0f172a; font-weight: 800; border-left: 4px solid var(--accent); padding-left: 8px; margin-bottom: 5mm }

    /* Experience cards */
    .role{ display:block; margin-bottom: 6mm; }
    .role h3{ font-size: 14.6px; margin-bottom: 1mm; }
    .role-meta{ text-align:right; font-size: 12.2px; color: var(--muted); margin-bottom: 2mm; }
    .company{ font-weight:700; }
    .location{ color: var(--muted); margin-bottom: 2mm; }
    .bullets{ margin-top: 2mm; padding-left: 1rem; }
    .bullets li{ margin-bottom: 1.5mm; line-height: 1.4; }

    /* Typographic helpers */
    .muted{ color: var(--muted) }
    .tag{ display:inline-block; border:1px solid #cbd5e1; padding:.18rem .5rem; border-radius:999px; font-size:12px; margin:.15rem .15rem 0 0 }

    /* Avoid breaks within role entries */
    .role { break-inside: avoid; page-break-inside: avoid; margin-bottom: 6mm; }
    .section { break-inside: avoid-column; }
    
    /* Force page break */
    .page-break { page-break-before: always; break-before: page; }

    /* Print styles */
    @media print {
      @page { 
        size: A4; 
        margin: 15mm 12mm 15mm 12mm; 
      }
      
      html, body { 
        height: auto !important; 
        background: white !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      
      .sheet{ 
        margin: 0 !important; 
        box-shadow: none !important; 
        border-radius: 0 !important; 
        width: auto !important; 
        min-height: auto !important; 
        height: auto !important;
        max-width: none !important;
        padding: 0 !important;
        overflow: visible !important;
      }
      
      .toolbar{ display: none !important; }
      
      /* Mejorar saltos de p√°gina */
      .header { 
        break-after: auto;
        page-break-after: auto;
      }
      
      .summary {
        break-after: auto;
        page-break-after: auto;
      }
      
      .section { 
        break-inside: avoid;
        page-break-inside: avoid;
        margin-top: 8mm;
      }
      
      .section:first-of-type {
        margin-top: 6mm;
      }
      
      .role { 
        break-inside: avoid !important;
        page-break-inside: avoid !important;
        margin-bottom: 5mm;
        display: grid;
        grid-template-columns: 1fr auto;
        gap: 3mm;
      }
      
      .role:not(:last-child) {
        margin-bottom: 7mm;
      }
      
      .bullets {
        margin-top: 1mm;
        padding-left: 4mm;
      }
      
      .bullets li {
        margin-bottom: 1.2mm;
        line-height: 1.35;
        font-size: 11.5px;
      }
      
      /* Evitar que los t√≠tulos de secci√≥n queden solos al final de p√°gina */
      .section-title {
        break-after: avoid;
        page-break-after: avoid;
      }
      
      /* Asegurar que los enlaces se vean bien en impresi√≥n */
      a { 
        color: black !important; 
        text-decoration: none !important; 
      }
      
      /* Ajustar tama√±os de fuente para mejor legibilidad en impresi√≥n */
      .name { font-size: 24px; }
      .section-title { font-size: 14px; }
      .role h3 { font-size: 13px; }
      .summary { font-size: 12px; }
    }

    /* Small screens preview */
    @media (max-width: 820px){
      .header{ grid-template-columns: 1fr; text-align:left }
      .contacts{ justify-self:start; text-align:left }
      .sheet{ margin:0; border-radius:0 }
    }
  </style>
</head>
<body>
  <div class="toolbar">
    <button onclick="window.print()" title="Print CV">üñ®Ô∏è Print</button>
    <button onclick="downloadPDF()" title="Download CV as PDF" id="download-btn">üìÑ Download PDF</button>
  </div>

  <main class="sheet" role="document">
    <!-- HEADER -->
    <header class="header">
      <div>
        <h1 class="name">Gabriel Alexander Sosa Ram√≠rez</h1>
        <div class="subtitle">Software Developer ¬∑ Full Stack</div>
      </div>
      <div class="contacts">
        Tegucigalpa, Honduras ¬∑ <a href="https://linkedin.com/in/gabrielsosar">linkedin.com/in/gabrielsosar</a><br />
        <a href="tel:+50495153072">+504 9515-3072</a> ¬∑ <a href="mailto:gabrielsosa3093@gmail.com">gabrielsosa3093@gmail.com</a>
      </div>
    </header>

    <!-- SUMMARY -->
    <section class="summary">
      <p><strong>Over 8 years</strong> of experience as a Software Developer. I led the development of 2 migrations, achieving a <strong>40%</strong> improvement in product delivery and a <strong>25%</strong> improvement in banking operations performance.</p>
    </section>

    <!-- EXPERIENCE -->
    <section class="section">
      <h2 class="section-title">Professional Experience</h2>
      <!-- Las experiencias se cargan din√°micamente desde JSON -->
      
      <!-- Fallback content mientras carga JavaScript -->
      <div id="experience-fallback">
        <article class="role">
          <h3><span class="company">Stefanini Group S.A.</span> ‚Äî Senior Cloud Engineer & Full Stack Developer</h3>
          <div class="role-meta">2022 - Present</div>
          <div class="location muted">Tegucigalpa, Honduras</div>
          <ul class="bullets">
            <li>Successfully migrated 25+ legacy applications to AWS with 99.9% uptime</li>
            <li>Developed 15+ full stack web applications with Java/Python/Angular/Node.js</li>
            <li>Reduced cloud costs by 40% through optimization and rightsizing</li>
            <li>Implemented CI/CD pipelines that reduced deployment time by 80%</li>
            <li>Designed multi-region architectures with automated disaster recovery</li>
            <li><strong>Technologies:</strong> AWS, React, Node.js, Terraform, Kubernetes, Docker, PostgreSQL, Python.</li>
          </ul>
        </article>

        <article class="role">
          <h3><span class="company">Banco FICENSA</span> ‚Äî Senior Cloud Developer</h3>
          <div class="role-meta">2020 - 2022</div>
          <div class="location muted">Tegucigalpa, Honduras</div>
          <ul class="bullets">
            <li>Developed and implemented cloud-ready modules for ATM systems processing 10,000+ daily transactions</li>
            <li>Designed and integrated software products that optimized internal processes reducing operational times by 45%</li>
            <li>Implemented automated ETLs and real-time log analysis for critical applications using cloud technologies</li>
            <li>Facilitated secure integrations with external providers improving banking connectivity and regulatory compliance</li>
            <li>Established CI/CD pipelines from scratch, reducing banking module deployment time from days to hours</li>
            <li><strong>Technologies:</strong> Java 8, Angular, Docker, Jenkins, DB2, RPG ILE, CI/CD, ETL, Cloud Integration.</li>
          </ul>
        </article>

        <article class="role page-break">
          <h3><span class="company">Banco Atl√°ntida</span> ‚Äî Backend Developer</h3>
          <div class="role-meta">2018 - 2020</div>
          <div class="location muted">Tegucigalpa, Honduras</div>
          <ul class="bullets">
            <li>Executed complete banking core migration from IBS to SAP with zero service interruptions</li>
            <li>Developed containerized microservices architecture with Docker and orchestrated with Kubernetes on OpenShift</li>
            <li>Implemented critical Jteller application migration from RPG legacy to modern Java with Node.js backend</li>
            <li>Optimized enterprise banking operations through proactive monitoring and automated incident resolution</li>
            <li>Established containerization and orchestration standards that reduced deployment time by 70%</li>
            <li><strong>Technologies:</strong> Java Spring Boot, Node.js, Docker, Kubernetes, OpenShift, SAP HANA, DB2, RPG ILE, Microservices.</li>
          </ul>
        </article>
      </div>
    </section>

    <!-- EDUCATION -->
    <section class="section">
      <h2 class="section-title">Education / Certifications</h2>
      <article style="margin-bottom:5mm">
        <h3>UNAH ‚Äî <span class="company">Systems Engineering</span></h3>
        <div class="muted">Honduras ¬∑ August 2017 ¬∑ <strong>Cum Laude: 83%</strong></div>
      </article>
      <article style="margin-bottom:4mm">
        <h3>CERTIPROF ‚Äî Scrum Foundations Professional Certificate (SFPC)</h3>
        <div class="muted">Honduras ¬∑ June 2020</div>
      </article>
      <article>
        <h3>GOOGLE ‚Äî Google Digital Leader</h3>
        <div class="muted">Honduras ¬∑ June 2024</div>
      </article>
    </section>

    <!-- SKILLS -->
    <section class="section">
      <h2 class="section-title">Additional Skills</h2>
      <ul>
        <li>Coordination and execution of software projects; end-to-end team leadership.</li>
        <li>Full Stack: .NET/C#, PHP, Java, JavaScript (Angular, React), Tailwind CSS, Python.</li>
        <li>Databases: SQL Server, MySQL, PostgreSQL, DB2, MongoDB.</li>
        <li>Reporting and dashboards: Power BI, Talend Studio, Tableau, Crystal Reports.</li>
        <li>APIs and microservices; cloud: AWS, Azure, GCP.</li>
        <li>Languages: Native Spanish; Advanced English (B1).</li>
      </ul>
      <div aria-hidden="true" style="margin-top:4mm">
        <span class="tag">Java / Spring Boot</span>
        <span class="tag">Angular 17</span>
        <span class="tag">Python / pandas</span>
        <span class="tag">Docker</span>
        <span class="tag">Kubernetes</span>
        <span class="tag">CI/CD</span>
        <span class="tag">Azure</span>
        <span class="tag">GCP</span>
        <span class="tag">AWS</span>
      </div>
    </section>

  </main>

  <!-- jsPDF Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  
  <!-- i18n System -->
  <script src="./scripts/i18n-simple.js"></script>

  <script>
    // Funci√≥n para obtener el idioma del localStorage o URL
    const getLanguage = () => {
      // Primero, verificar si viene de una URL con par√°metro de idioma
      const urlParams = new URLSearchParams(window.location.search);
      const langFromUrl = urlParams.get('lang');
      if (langFromUrl && (langFromUrl === 'es' || langFromUrl === 'en')) {
        return langFromUrl;
      }
      
      // Segundo, verificar localStorage (del portfolio principal)
      const savedLang = localStorage.getItem('portfolio-lang');
      if (savedLang && (savedLang === 'es' || savedLang === 'en')) {
        return savedLang;
      }
      
      // Por defecto, ingl√©s (en.json)
      return 'en';
    };

    // Funci√≥n para actualizar el contenido del CV
    const updateCV = async (lang) => {
      console.log('Actualizando CV con idioma:', lang);
      
      // Intentar cargar las traducciones manualmente si i18n no est√° disponible
      if (!window.I18n) {
        console.log('Sistema i18n no disponible, cargando manualmente...');
        try {
          const response = await fetch(`./lang/${lang}.json`);
          const translations = await response.json();
          
          await loadCVContent(translations.cv, translations.experience, lang);
          return;
        } catch (error) {
          console.error('Error cargando traducciones:', error);
          return;
        }
      }
      
      // Usar el sistema i18n existente si est√° disponible
      await window.I18n.changeLanguage(lang);
      const data = window.I18n.getCurrentTranslations().cv;
      const experienceData = window.I18n.getCurrentTranslations().experience;
      
      await loadCVContent(data, experienceData, lang);
    };

    // Funci√≥n auxiliar para cargar el contenido del CV
    const loadCVContent = async (data, experienceData, lang) => {
      if (!data) {
        console.error('No se encontraron datos del CV para el idioma:', lang);
        return;
      }
      
      console.log('Cargando contenido CV:', data);
      
      // Actualizar t√≠tulo de la p√°gina y idioma del documento
      document.title = data.title || 'Gabriel Sosa ‚Äî CV';
      document.documentElement.lang = lang;
      
      // Actualizar botones de la toolbar
      const printBtn = document.querySelector('.toolbar button[onclick="window.print()"]');
      const downloadBtn = document.getElementById('download-btn');
      if (printBtn && data.buttons) printBtn.innerHTML = data.buttons.print;
      if (downloadBtn && data.buttons) downloadBtn.innerHTML = data.buttons.download;
      
      // Actualizar header
      const subtitle = document.querySelector('.subtitle');
      if (subtitle && data.subtitle) subtitle.textContent = data.subtitle;
      
      // Actualizar summary
      const summaryP = document.querySelector('.summary p');
      if (summaryP && data.summary) summaryP.innerHTML = data.summary;
        
      // Actualizar t√≠tulos de secci√≥n
      const sectionTitles = document.querySelectorAll('.section-title');
      if (data.sections) {
        if (sectionTitles[0]) sectionTitles[0].textContent = data.sections.experience;
        if (sectionTitles[1]) sectionTitles[1].textContent = data.sections.education;
        if (sectionTitles[2]) sectionTitles[2].textContent = data.sections.skills;
      }
      
      // Actualizar experiencias din√°micamente
      // Priorizar experience.jobs que tiene m√°s detalles
      if (experienceData && experienceData.jobs) {
        const experienceSection = document.querySelector('.section');
        
        // Ocultar fallback content
        const fallback = document.getElementById('experience-fallback');
        if (fallback) fallback.style.display = 'none';
        
        // Limpiar experiencias existentes (excepto el fallback)
        const roles = experienceSection.querySelectorAll('.role');
        roles.forEach(role => role.remove());
        
        // Generar nuevas experiencias desde experience.jobs
        experienceData.jobs.forEach((job, index) => {
          const article = document.createElement('article');
          article.className = 'role';
          if (index === 2) article.className += ' page-break';
          
          article.innerHTML = `
            <h3><span class="company">${job.company}</span> ‚Äî ${job.title}</h3>
            <div class="role-meta">${job.period}</div>
            <div class="location muted">${job.location}</div>
            <ul class="bullets">
              ${job.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
              ${job.technologies && job.technologies.length > 0 ? 
                `<li><strong>${lang === 'es' ? 'Tecnolog√≠as' : 'Technologies'}:</strong> ${job.technologies.join(', ')}.</li>` : 
                ''}
            </ul>
          `;
          
          experienceSection.appendChild(article);
        });
      }
      // Fallback: usar cv.experiences si experience.jobs no est√° disponible
      else if (data.experiences) {
        const experienceSection = document.querySelector('.section');
        
        // Ocultar fallback content
        const fallback = document.getElementById('experience-fallback');
        if (fallback) fallback.style.display = 'none';
        
        // Limpiar experiencias existentes (excepto el fallback)
        const roles = experienceSection.querySelectorAll('.role');
        roles.forEach(role => role.remove());
        
        // Generar nuevas experiencias desde cv.experiences
        data.experiences.forEach((job, index) => {
          const article = document.createElement('article');
          article.className = 'role';
          if (index === 2) article.className += ' page-break';
          
          article.innerHTML = `
            <h3><span class="company">${job.company}</span> ‚Äî ${job.title}</h3>
            <div class="role-meta">${job.period}</div>
            <div class="location muted">${job.location}</div>
            <ul class="bullets">
              ${job.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
            </ul>
          `;
          
          experienceSection.appendChild(article);
        });
      }
      
      // Actualizar educaci√≥n
      if (data.education) {
        const eduSection = document.querySelectorAll('.section')[1];
        const eduArticles = eduSection.querySelectorAll('article');
        data.education.forEach((edu, index) => {
          if (eduArticles[index]) {
            const article = eduArticles[index];
            if (edu.honors) {
              article.querySelector('h3').innerHTML = `${edu.institution} ‚Äî <span class="company">${edu.degree}</span>`;
              article.querySelector('.muted').innerHTML = `Honduras ¬∑ ${edu.date} ¬∑ <strong>${edu.honors}</strong>`;
            } else {
              article.querySelector('h3').textContent = `${edu.institution} ‚Äî ${edu.degree}`;
              article.querySelector('.muted').textContent = `Honduras ¬∑ ${edu.date}`;
            }
          }
        });
      }
      
      // Actualizar skills
      if (data.skills) {
        const skillsSection = document.querySelectorAll('.section')[2];
        const skillsList = skillsSection.querySelector('ul');
        skillsList.innerHTML = '';
        data.skills.forEach(skill => {
          const li = document.createElement('li');
          li.textContent = skill;
          skillsList.appendChild(li);
        });
      }
    };

    // Inicializar CV con el idioma correcto
    const initCV = async () => {
      console.log('Inicializando CV...');
      const lang = getLanguage();
      console.log('Idioma detectado:', lang);
      
      try {
        await updateCV(lang);
        console.log('CV actualizado correctamente');
      } catch (error) {
        console.error('Error inicializando CV:', error);
      }
      
      // Escuchar cambios en localStorage para sincronizar con el portfolio
      window.addEventListener('storage', async (e) => {
        if (e.key === 'portfolio-lang') {
          console.log('Cambio de idioma detectado:', e.newValue);
          try {
            await updateCV(e.newValue || 'en');
          } catch (error) {
            console.error('Error cambiando idioma:', error);
          }
        }
      });
    };
    const fitToViewport = () => {
      const sheet = document.querySelector('.sheet');
      if(!sheet) return;
      const vw = Math.min(window.innerWidth, document.documentElement.clientWidth);
      const desired = parseFloat(getComputedStyle(sheet).width);
      const pad = 24;
      const scale = Math.min(1, (vw - pad) / desired);
      sheet.style.transformOrigin = 'top center';
      sheet.style.transform = `scale(${scale})`;
    };

    // Funci√≥n para descargar PDF
    const downloadPDF = async () => {
      const downloadBtn = document.getElementById('download-btn');
      const originalText = downloadBtn.textContent;
      
      try {
        // Cambiar texto del bot√≥n mientras se genera
        downloadBtn.textContent = '‚è≥ Generando PDF...';
        downloadBtn.disabled = true;
        
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('portrait', 'mm', 'a4');
        
        // Obtener elementos principales
        const sheet = document.querySelector('.sheet');
        const toolbar = document.querySelector('.toolbar');
        
        // Ocultar toolbar temporalmente para el PDF
        const originalToolbarDisplay = toolbar.style.display;
        toolbar.style.display = 'none';
        
        // Remover escala temporal para captura
        const originalTransform = sheet.style.transform;
        sheet.style.transform = 'none';
        
        // Crear contenedor temporal para la primera p√°gina (hasta Banco FICENSA)
        const tempContainer1 = document.createElement('div');
        tempContainer1.style.cssText = `
          width: ${sheet.offsetWidth}px;
          padding: ${getComputedStyle(sheet).padding};
          background: white;
          font-family: ${getComputedStyle(sheet).fontFamily};
          font-size: ${getComputedStyle(sheet).fontSize};
          line-height: ${getComputedStyle(sheet).lineHeight};
          color: ${getComputedStyle(sheet).color};
        `;
        
        // Clonar header, summary y las primeras dos experiencias
        const header = sheet.querySelector('.header').cloneNode(true);
        const summary = sheet.querySelector('.summary').cloneNode(true);
        const experienceSection = sheet.querySelector('.section').cloneNode(false);
        const sectionTitle = sheet.querySelector('.section-title').cloneNode(true);
        const stefanini = sheet.querySelectorAll('.role')[0].cloneNode(true);
        const ficensa = sheet.querySelectorAll('.role')[1].cloneNode(true);
        
        experienceSection.appendChild(sectionTitle);
        experienceSection.appendChild(stefanini);
        experienceSection.appendChild(ficensa);
        
        tempContainer1.appendChild(header);
        tempContainer1.appendChild(summary);
        tempContainer1.appendChild(experienceSection);
        
        document.body.appendChild(tempContainer1);
        
        // Capturar primera p√°gina
        const canvas1 = await html2canvas(tempContainer1, {
          scale: 2,
          useCORS: true,
          logging: false,
          backgroundColor: '#ffffff'
        });
        
        const imgData1 = canvas1.toDataURL('image/png');
        const imgWidth = 210; // A4 width in mm
        const imgHeight1 = (canvas1.height * imgWidth) / canvas1.width;
        
        pdf.addImage(imgData1, 'PNG', 0, 0, imgWidth, imgHeight1);
        
        // Crear contenedor temporal para la segunda p√°gina (desde Banco Atl√°ntida)
        const tempContainer2 = document.createElement('div');
        tempContainer2.style.cssText = tempContainer1.style.cssText;
        
        // Clonar el resto del contenido - EMPEZANDO con Banco Atl√°ntida
        const experienceSection2 = sheet.querySelector('.section').cloneNode(false);
        const sectionTitle2 = sheet.querySelector('.section-title').cloneNode(true);
        const atlantida = sheet.querySelectorAll('.role')[2].cloneNode(true);
        
        experienceSection2.appendChild(sectionTitle2);
        experienceSection2.appendChild(atlantida);
        
        // PRIMERO agregar la experiencia con Atl√°ntida
        tempContainer2.appendChild(experienceSection2);
        
        // DESPU√âS agregar otras secciones (educaci√≥n, skills)
        const otherSections = Array.from(sheet.querySelectorAll('.section')).slice(1);
        otherSections.forEach(section => {
          tempContainer2.appendChild(section.cloneNode(true));
        });
        
        document.body.appendChild(tempContainer2);
        
        // Capturar segunda p√°gina
        const canvas2 = await html2canvas(tempContainer2, {
          scale: 2,
          useCORS: true,
          logging: false,
          backgroundColor: '#ffffff'
        });
        
        const imgData2 = canvas2.toDataURL('image/png');
        const imgHeight2 = (canvas2.height * imgWidth) / canvas2.width;
        
        pdf.addPage();
        pdf.addImage(imgData2, 'PNG', 0, 0, imgWidth, imgHeight2);
        
        // Limpiar contenedores temporales
        document.body.removeChild(tempContainer1);
        document.body.removeChild(tempContainer2);
        
        // Restaurar estilos
        toolbar.style.display = originalToolbarDisplay;
        sheet.style.transform = originalTransform;
        
        // Descargar el PDF
        pdf.save('Gabriel_Sosa_CV.pdf');
        
      } catch (error) {
        console.error('Error generando PDF:', error);
        alert('Error al generar el PDF. Por favor intenta de nuevo.');
      } finally {
        // Restaurar bot√≥n
        downloadBtn.textContent = originalText;
        downloadBtn.disabled = false;
      }
    };

    window.addEventListener('load', async () => {
      console.log('P√°gina cargada, inicializando CV...');
      // Esperar un poco para que todos los scripts se carguen
      setTimeout(async () => {
        await initCV();
        fitToViewport();
      }, 500);
    });
    window.addEventListener('resize', fitToViewport);
  </script>
</body>
</html>
